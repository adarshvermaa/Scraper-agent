{
  "projectName": "secure-scrape-agent-backend",
  "description": "High-performance Scrape → Ingest → RAG → Multi-model Summarize → Publish system with Milvus vector store and MCP server",
  "version": "1.0.0",
  "technology": {
    "runtime": "Node.js 20+",
    "framework": "NestJS",
    "language": "TypeScript",
    "database": "PostgreSQL with Prisma ORM",
    "vectorStore": ["Milvus (Faiss GPU)", "Pinecone (Cloud Alternative)"],
    "queue": "BullMQ with Redis",
    "aiProviders": ["OpenAI", "Anthropic", "Google Gemini"],
    "scraping": "Playwright",
    "monitoring": ["Prometheus", "Grafana"],
    "deployment": ["Docker", "Kubernetes"]
  },
  "moduleTree": {
    "root": {
      "config": ["package.json", "tsconfig.json", ".env.example", "nest-cli.json", ".gitignore"],
      "infrastructure": {
        "docker": ["docker-compose.yml", "Dockerfile", "Dockerfile.gpu"],
        "kubernetes": ["namespace.yaml", "configmap.yaml", "deployment.yaml", "service.yaml"],
        "monitoring": ["prometheus.yml", "grafana-dashboard.json"]
      },
      "src": {
        "core": ["main.ts", "app.module.ts"],
        "config": ["configuration.ts"],
        "common": ["logger.ts", "decorators.ts", "exceptions.ts"],
        "modules": {
          "database": ["database.module.ts", "prisma.service.ts"],
          "vector-store": [
            "vector-store.module.ts",
            "vector-store.interface.ts",
            "milvus.service.ts",
            "pinecone.service.ts"
          ],
          "ai": [
            "ai.module.ts",
            "ai.service.ts",
            "ai-provider.interface.ts",
            {
              "providers": ["openai.provider.ts", "anthropic.provider.ts", "gemini.provider.ts"]
            }
          ],
          "scraper": [
            "scraper.module.ts",
            "scraper.service.ts",
            "scraper.processor.ts",
            "scraper.types.ts"
          ],
          "ingest": ["ingest.module.ts", "ingest.service.ts", "chunker.service.ts"],
          "mcp": ["mcp.module.ts", "mcp.server.ts", "mcp.types.ts"],
          "metrics": ["metrics.module.ts", "metrics.service.ts"],
          "publisher": ["publisher.module.ts", "publisher.service.ts"]
        },
        "prisma": ["schema.prisma", "seed.ts"]
      },
      "tests": {
        "unit": ["ai.service.spec.ts", "scraper.service.spec.ts", "ingest.service.spec.ts"],
        "integration": ["mcp-integration.spec.ts", "e2e-workflow.spec.ts"]
      }
    }
  },
  "keyFeatures": [
    "Milvus vector store with Faiss GPU indexing (IVF_PQ, HNSW, IVF_FLAT)",
    "Pinecone adapter for managed cloud alternative",
    "Multi-AI provider support with automatic failover",
    "Batch embedding with Redis caching (SHA-256 keyed)",
    "Playwright-based web scraping with robots.txt compliance",
    "BullMQ async job processing with deduplication",
    "MCP JSON-RPC TCP server (search_jobs, get_job, summarize_job, publish_job, ingest_url)",
    "Prometheus metrics + Grafana dashboards",
    "Docker Compose for local development",
    "Kubernetes manifests with GPU support",
    "Comprehensive error handling and logging"
  ],
  "apiEndpoints": {
    "mcp": {
      "protocol": "JSON-RPC over TCP",
      "port": 4000,
      "methods": [
        {
          "name": "search_jobs",
          "params": { "query": "string", "filters": "object", "limit": "number" },
          "returns": "Job[]"
        },
        {
          "name": "get_job",
          "params": { "id": "string" },
          "returns": "Job"
        },
        {
          "name": "summarize_job",
          "params": { "id": "string", "provider": "string", "model": "string" },
          "returns": "Summary"
        },
        {
          "name": "publish_job",
          "params": { "id": "string", "platform": "string", "content": "string" },
          "returns": "Publication"
        },
        {
          "name": "ingest_url",
          "params": { "url": "string", "source": "string" },
          "returns": "{ jobId: string }"
        }
      ]
    }
  },
  "deployment": {
    "docker": {
      "local": "docker-compose up -d",
      "build": "docker build -f docker/Dockerfile.gpu -t scrape-agent-backend .",
      "run": "docker run -p 3000:3000 -p 4000:4000 scrape-agent-backend"
    },
    "kubernetes": {
      "apply": "kubectl apply -f k8s/",
      "requirements": ["GPU node pool", "CUDA 11.0+", "NVIDIA device plugin"]
    }
  },
  "environmentVariables": {
    "required": {
      "DATABASE_URL": "PostgreSQL connection string",
      "REDIS_HOST": "Redis host",
      "OPENAI_API_KEY": "OpenAI API key (or other AI provider)"
    },
    "vectorStore": {
      "USE_PINECONE": "false (Milvus) or true (Pinecone)",
      "MILVUS_ADDRESS": "localhost:19530",
      "MILVUS_INDEX_TYPE": "IVF_PQ | HNSW | IVF_FLAT",
      "MILVUS_USE_GPU": "true | false",
      "PINECONE_API_KEY": "Required if USE_PINECONE=true"
    },
    "ai": {
      "EMBEDDING_BATCH_SIZE": "64",
      "EMBEDDING_PROVIDER": "openai | anthropic | gemini",
      "EMBEDDING_CACHE_TTL": "604800 (7 days)"
    }
  },
  "filesGenerated": 34,
  "linesOfCode": "~6000+",
  "productionReady": true
}
